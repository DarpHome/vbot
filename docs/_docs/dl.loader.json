{"module_name":"dl.loader","description":"## Description:\n\n`dl.loader` is an abstraction layer over `dl` that provides a more user-friendly API in the V way. It can be used to Dynamically Load a library during runtime in scenarios where the library to load does not have a determined path an can be located in different places.\n\nIt also provides a way to load a library from a specific path, or from a list of paths, or from a custom environment variable that contains a list of paths.\n\n## Usage:\n\n\n```v\nimport dl.loader\n\n// Load a library from a list of paths\nconst default_paths = [\n'not-existing-dynamic-link-library'\n// 'C:\\Windows\\System32\\shell32.dll',\n'shell32',\n]\n\nfn main() {\nmut dl_loader := loader.get_or_create_dynamic_lib_loader(\nkey: 'LibExample'\nenv_path: 'LIB_PATH'\npaths: default_paths\n)!\n\ndefer {\ndl_loader.unregister()\n}\n\nsym := dl_loader.get_sym('CommandLineToArgvW')!\nassert !isnil(sym)\n}\n```\n","contents":[{"attributes":{},"comments":[],"children":[{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"const dl_no_path_issue_code = 1","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":12,"pos":383,"col":0,"last_line":12},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"const dl_open_issue_code = 1","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":13,"pos":419,"col":0,"last_line":13},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"const dl_sym_issue_code = 2","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":14,"pos":452,"col":0,"last_line":14},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"const dl_close_issue_code = 3","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":15,"pos":484,"col":0,"last_line":15},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"const dl_register_issue_code = 4","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":16,"pos":518,"col":0,"last_line":16},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"const dl_no_path_issue_err = error_with_code(dl_no_path_issue_msg, dl_no_path_issue_code)","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":18,"pos":556,"col":0,"last_line":18},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"const dl_open_issue_err = error_with_code(dl_open_issue_msg, dl_open_issue_code)","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":19,"pos":650,"col":0,"last_line":19},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"const dl_sym_issue_err = error_with_code(dl_sym_issue_msg, dl_sym_issue_code)","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":20,"pos":735,"col":0,"last_line":20},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"const dl_close_issue_err = error_with_code(dl_close_issue_msg, dl_close_issue_code)","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":21,"pos":817,"col":0,"last_line":21},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"const dl_register_issue_err = error_with_code(dl_register_issue_msg, dl_register_issue_code)","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":22,"pos":905,"col":0,"last_line":22},"platform":"cross","kind":"const_group","public":true,"from_scope":false}],"tags":[],"file_path":"","content":"","name":"Constants","parent_name":"","return_type":"","pos":{"len":0,"line_nr":0,"pos":0,"col":0,"last_line":0},"platform":"auto","kind":"const_group","public":false,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 registered_dl_loader_keys returns the keys of registered DynamicLibLoader.","is_multi":false,"pos":{"len":76,"line_nr":35,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"fn registered_dl_loader_keys() []string","name":"registered_dl_loader_keys","parent_name":"","return_type":"[]string","pos":{"len":43,"line_nr":36,"pos":1341,"col":0,"last_line":38},"platform":"cross","kind":"function","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 DynamicLibLoader is a wrapper around dlopen, dlsym and dlclose.","is_multi":false,"pos":{"len":65,"line_nr":40,"pos":0,"col":0,"last_line":0}}],"children":[{"attributes":{},"comments":[{"text":"\u0001 load loads the dynamic library.","is_multi":false,"pos":{"len":33,"line_nr":100,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"fn (mut dl_loader DynamicLibLoader) open() !voidptr","name":"open","parent_name":"DynamicLibLoader","return_type":"!voidptr","pos":{"len":55,"line_nr":101,"pos":2971,"col":0,"last_line":114},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 close closes the dynamic library.","is_multi":false,"pos":{"len":35,"line_nr":116,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"fn (mut dl_loader DynamicLibLoader) close() !","name":"close","parent_name":"DynamicLibLoader","return_type":"!","pos":{"len":49,"line_nr":117,"pos":3300,"col":0,"last_line":126},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 get_sym gets a symbol from the dynamic library.","is_multi":false,"pos":{"len":49,"line_nr":128,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"fn (mut dl_loader DynamicLibLoader) get_sym(name string) !voidptr","name":"get_sym","parent_name":"DynamicLibLoader","return_type":"!voidptr","pos":{"len":69,"line_nr":129,"pos":3560,"col":0,"last_line":142},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 unregister unregisters the DynamicLibLoader.","is_multi":false,"pos":{"len":46,"line_nr":144,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"fn (mut dl_loader DynamicLibLoader) unregister()","name":"unregister","parent_name":"DynamicLibLoader","return_type":"void","pos":{"len":52,"line_nr":145,"pos":3905,"col":0,"last_line":148},"platform":"cross","kind":"method","public":true,"from_scope":false}],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"struct DynamicLibLoader {\npub:\n\tkey   string\n\tflags int = dl.rtld_lazy\n\tpaths []string\nmut:\n\thandle  voidptr\n\tsym_map map[string]voidptr\n}","name":"DynamicLibLoader","parent_name":"","return_type":"","pos":{"len":27,"line_nr":42,"pos":1502,"col":0,"last_line":50},"platform":"cross","kind":"struct_","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 DynamicLibLoaderConfig is a configuration for DynamicLibLoader.","is_multi":false,"pos":{"len":65,"line_nr":52,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"struct DynamicLibLoaderConfig {\n\t// flags is the flags for dlopen.\n\tflags int = dl.rtld_lazy\n\t// key is the key to register the DynamicLibLoader.\n\tkey string\n\t// env_path is the environment variable name that contains the path to the dynamic library.\n\tenv_path string\n\t// paths is the list of paths to the dynamic library.\n\tpaths []string\n}","name":"DynamicLibLoaderConfig","parent_name":"","return_type":"","pos":{"len":33,"line_nr":54,"pos":1723,"col":0,"last_line":63},"platform":"cross","kind":"struct_","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 get_or_create_dynamic_lib_loader returns a DynamicLibLoader.","is_multi":false,"pos":{"len":62,"line_nr":91,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 If the DynamicLibLoader is not registered, it creates a new DynamicLibLoader.","is_multi":false,"pos":{"len":79,"line_nr":92,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\dl\\loader\\loader.v","content":"fn get_or_create_dynamic_lib_loader(conf DynamicLibLoaderConfig) !&DynamicLibLoader","name":"get_or_create_dynamic_lib_loader","parent_name":"","return_type":"DynamicLibLoader","pos":{"len":87,"line_nr":93,"pos":2733,"col":0,"last_line":98},"platform":"cross","kind":"function","public":true,"from_scope":false}],"generator":"vdoc","time_generated":"2024-01-13 21:06:32"}