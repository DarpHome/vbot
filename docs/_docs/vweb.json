{"module_name":"vweb","contents":[{"attributes":{},"comments":[{"text":"\u0001 A type which don't get filtered inside templates","is_multi":false,"pos":{"len":50,"line_nr":17,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"type RawHtml = string","name":"RawHtml","parent_name":"","return_type":"","pos":{"len":16,"line_nr":18,"pos":391,"col":0,"last_line":18},"platform":"cross","kind":"typedef","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 A dummy structure that returns from routes to indicate that you actually sent something to a user","is_multi":false,"pos":{"len":99,"line_nr":20,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"struct Result {}","name":"Result","parent_name":"","return_type":"","pos":{"len":17,"line_nr":22,"pos":529,"col":0,"last_line":22},"platform":"cross","kind":"struct_","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"const methods_with_form = [http.Method.post, .put, .patch]","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":24,"pos":551,"col":0,"last_line":24},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"const headers_close = http.new_custom_header_from_map({\n\t'Server':                           'VWeb'\n\thttp.CommonHeader.connection.str(): 'close'\n}) or { panic('should never fail') }","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":25,"pos":614,"col":0,"last_line":28},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"const http_302 = http.new_response(\n\tstatus: .found\n\tbody: '302 Found'\n\theader: headers_close\n)","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":30,"pos":801,"col":0,"last_line":34},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"const http_303 = http.new_response(\n\tstatus: .see_other\n\tbody: '303 See Other'\n\theader: headers_close\n)","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":35,"pos":901,"col":0,"last_line":39},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"const http_400 = http.new_response(\n\tstatus: .bad_request\n\tbody: '400 Bad Request'\n\theader: http.new_header(\n\t\tkey: .content_type\n\t\tvalue: 'text/plain'\n\t).join(headers_close)\n)","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":40,"pos":1009,"col":0,"last_line":47},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"const http_404 = http.new_response(\n\tstatus: .not_found\n\tbody: '404 Not Found'\n\theader: http.new_header(\n\t\tkey: .content_type\n\t\tvalue: 'text/plain'\n\t).join(headers_close)\n)","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":48,"pos":1190,"col":0,"last_line":55},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"const http_500 = http.new_response(\n\tstatus: .internal_server_error\n\tbody: '500 Internal Server Error'\n\theader: http.new_header(\n\t\tkey: .content_type\n\t\tvalue: 'text/plain'\n\t).join(headers_close)\n)","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":56,"pos":1367,"col":0,"last_line":63},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"const mime_types = {\n\t'.aac':    'audio/aac'\n\t'.abw':    'application/x-abiword'\n\t'.arc':    'application/x-freearc'\n\t'.avi':    'video/x-msvideo'\n\t'.azw':    'application/vnd.amazon.ebook'\n\t'.bin':    'application/octet-stream'\n\t'.bmp':    'image/bmp'\n\t'.bz':     'application/x-bzip'\n\t'.bz2':    'application/x-bzip2'\n\t'.cda':    'application/x-cdf'\n\t'.csh':    'application/x-csh'\n\t'.css':    'text/css'\n\t'.csv':    'text/csv'\n\t'.doc':    'application/msword'\n\t'.docx':   'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\n\t'.eot':    'application/vnd.ms-fontobject'\n\t'.epub':   'application/epub+zip'\n\t'.gz':     'application/gzip'\n\t'.gif':    'image/gif'\n\t'.htm':    'text/html'\n\t'.html':   'text/html'\n\t'.ico':    'image/vnd.microsoft.icon'\n\t'.ics':    'text/calendar'\n\t'.jar':    'application/java-archive'\n\t'.jpeg':   'image/jpeg'\n\t'.jpg':    'image/jpeg'\n\t'.js':     'text/javascript'\n\t'.json':   'application/json'\n\t'.jsonld': 'application/ld+json'\n\t'.md':     'text/markdown'\n\t'.mid':    'audio/midi audio/x-midi'\n\t'.midi':   'audio/midi audio/x-midi'\n\t'.mjs':    'text/javascript'\n\t'.mp3':    'audio/mpeg'\n\t'.mp4':    'video/mp4'\n\t'.mpeg':   'video/mpeg'\n\t'.mpkg':   'application/vnd.apple.installer+xml'\n\t'.odp':    'application/vnd.oasis.opendocument.presentation'\n\t'.ods':    'application/vnd.oasis.opendocument.spreadsheet'\n\t'.odt':    'application/vnd.oasis.opendocument.text'\n\t'.oga':    'audio/ogg'\n\t'.ogv':    'video/ogg'\n\t'.ogx':    'application/ogg'\n\t'.opus':   'audio/opus'\n\t'.otf':    'font/otf'\n\t'.png':    'image/png'\n\t'.pdf':    'application/pdf'\n\t'.php':    'application/x-httpd-php'\n\t'.ppt':    'application/vnd.ms-powerpoint'\n\t'.pptx':   'application/vnd.openxmlformats-officedocument.presentationml.presentation'\n\t'.rar':    'application/vnd.rar'\n\t'.rtf':    'application/rtf'\n\t'.sh':     'application/x-sh'\n\t'.svg':    'image/svg+xml'\n\t'.swf':    'application/x-shockwave-flash'\n\t'.tar':    'application/x-tar'\n\t'.toml':   'application/toml'\n\t'.tif':    'image/tiff'\n\t'.tiff':   'image/tiff'\n\t'.ts':     'video/mp2t'\n\t'.ttf':    'font/ttf'\n\t'.txt':    'text/plain'\n\t'.vsd':    'application/vnd.visio'\n\t'.wasm':   'application/wasm'\n\t'.wav':    'audio/wav'\n\t'.weba':   'audio/webm'\n\t'.webm':   'video/webm'\n\t'.webp':   'image/webp'\n\t'.woff':   'font/woff'\n\t'.woff2':  'font/woff2'\n\t'.xhtml':  'application/xhtml+xml'\n\t'.xls':    'application/vnd.ms-excel'\n\t'.xlsx':   'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n\t'.xml':    'application/xml'\n\t'.xul':    'application/vnd.mozilla.xul+xml'\n\t'.zip':    'application/zip'\n\t'.3gp':    'video/3gpp'\n\t'.3g2':    'video/3gpp2'\n\t'.7z':     'application/x-7z-compressed'\n}","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":64,"pos":1568,"col":0,"last_line":144},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"const max_http_post_size = 1024 * 1024","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":145,"pos":4263,"col":0,"last_line":145},"platform":"cross","kind":"const_group","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"const default_port = 8080","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":146,"pos":4306,"col":0,"last_line":146},"platform":"cross","kind":"const_group","public":true,"from_scope":false}],"tags":[],"file_path":"","content":"","name":"Constants","parent_name":"","return_type":"","pos":{"len":0,"line_nr":0,"pos":0,"col":0,"last_line":0},"platform":"auto","kind":"const_group","public":false,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 The Context struct represents the Context which hold the HTTP request and response.","is_multi":false,"pos":{"len":85,"line_nr":148,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 It has fields for the query, form, files.","is_multi":false,"pos":{"len":43,"line_nr":149,"pos":0,"col":0,"last_line":0}}],"children":[{"attributes":{},"comments":[{"text":"\u0001 Defining this method is optional.","is_multi":false,"pos":{"len":35,"line_nr":199,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 This method called at server start.","is_multi":false,"pos":{"len":37,"line_nr":200,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 You can use it for initializing globals.","is_multi":false,"pos":{"len":42,"line_nr":201,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (ctx Context) init_server()","name":"init_server","parent_name":"Context","return_type":"void","pos":{"len":34,"line_nr":202,"pos":5973,"col":0,"last_line":204},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 before_accept_loop is called once the vweb app is started, and listening, but before the loop that accepts","is_multi":false,"pos":{"len":108,"line_nr":206,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 incomming request connections.","is_multi":false,"pos":{"len":32,"line_nr":207,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 It will be called in the main thread, that runs vweb.run/2 or vweb.run_at/2.","is_multi":false,"pos":{"len":78,"line_nr":208,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 It allows you to be notified about the successfull start of your app, and to synchronise your other threads","is_multi":false,"pos":{"len":109,"line_nr":209,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 with the webserver start, without error prone and slow pooling or time.sleep waiting.","is_multi":false,"pos":{"len":87,"line_nr":210,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 Defining this method is optional.","is_multi":false,"pos":{"len":35,"line_nr":211,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (ctx &Context) before_accept_loop()","name":"before_accept_loop","parent_name":"Context","return_type":"void","pos":{"len":42,"line_nr":212,"pos":6562,"col":0,"last_line":213},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 before_request is called once before each request is routed.","is_multi":false,"pos":{"len":62,"line_nr":215,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 It will be called in one of multiple threads in a pool, serving requests,","is_multi":false,"pos":{"len":75,"line_nr":216,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 the same one, in which the matching route method will be executed right after it.","is_multi":false,"pos":{"len":83,"line_nr":217,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 Defining this method is optional.","is_multi":false,"pos":{"len":35,"line_nr":218,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (ctx Context) before_request()","name":"before_request","parent_name":"Context","return_type":"void","pos":{"len":37,"line_nr":219,"pos":6873,"col":0,"last_line":219},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 TODO - test","is_multi":false,"pos":{"len":13,"line_nr":221,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 vweb intern function","is_multi":false,"pos":{"len":22,"line_nr":222,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) send_response_to_client(mimetype string, res string) bool","name":"send_response_to_client","parent_name":"Context","return_type":"bool","pos":{"len":82,"line_nr":224,"pos":6968,"col":0,"last_line":250},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 Response with payload and content-type `text/html`","is_multi":false,"pos":{"len":52,"line_nr":252,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) html(payload string) Result","name":"html","parent_name":"Context","return_type":"Result","pos":{"len":52,"line_nr":253,"pos":7909,"col":0,"last_line":256},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 Response with s as payload and content-type `text/plain`","is_multi":false,"pos":{"len":58,"line_nr":258,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) text(s string) Result","name":"text","parent_name":"Context","return_type":"Result","pos":{"len":46,"line_nr":259,"pos":8095,"col":0,"last_line":262},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 Response with json_s as payload and content-type `application/json`","is_multi":false,"pos":{"len":69,"line_nr":264,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) json[T](j T) Result","name":"json","parent_name":"Context","return_type":"Result","pos":{"len":44,"line_nr":265,"pos":8281,"col":0,"last_line":269},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 Response with a pretty-printed JSON result","is_multi":false,"pos":{"len":44,"line_nr":271,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) json_pretty[T](j T) Result","name":"json_pretty","parent_name":"Context","return_type":"Result","pos":{"len":51,"line_nr":272,"pos":8477,"col":0,"last_line":276},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 TODO - test","is_multi":false,"pos":{"len":13,"line_nr":278,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 Response with file as payload","is_multi":false,"pos":{"len":31,"line_nr":279,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) file(f_path string) Result","name":"file","parent_name":"Context","return_type":"Result","pos":{"len":51,"line_nr":280,"pos":8689,"col":0,"last_line":299},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 Response with s as payload and sets the status code to HTTP_OK","is_multi":false,"pos":{"len":64,"line_nr":301,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) ok(s string) Result","name":"ok","parent_name":"Context","return_type":"Result","pos":{"len":44,"line_nr":302,"pos":9275,"col":0,"last_line":306},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 TODO - test","is_multi":false,"pos":{"len":13,"line_nr":308,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 Response a server error","is_multi":false,"pos":{"len":25,"line_nr":309,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) server_error(ecode int) Result","name":"server_error","parent_name":"Context","return_type":"Result","pos":{"len":55,"line_nr":310,"pos":9461,"col":0,"last_line":319},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 Redirect to an url","is_multi":false,"pos":{"len":20,"line_nr":326,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) redirect(url string, params RedirectParams) Result","name":"redirect","parent_name":"Context","return_type":"Result","pos":{"len":75,"line_nr":327,"pos":9784,"col":0,"last_line":340},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 Send an not_found response","is_multi":false,"pos":{"len":28,"line_nr":342,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) not_found() Result","name":"not_found","parent_name":"Context","return_type":"Result","pos":{"len":43,"line_nr":343,"pos":10193,"col":0,"last_line":351},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 TODO - test","is_multi":false,"pos":{"len":13,"line_nr":353,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 Sets a cookie","is_multi":false,"pos":{"len":15,"line_nr":354,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) set_cookie(cookie http.Cookie)","name":"set_cookie","parent_name":"Context","return_type":"void","pos":{"len":55,"line_nr":355,"pos":10508,"col":0,"last_line":362},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 Sets the response content type","is_multi":false,"pos":{"len":32,"line_nr":364,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) set_content_type(typ string)","name":"set_content_type","parent_name":"Context","return_type":"void","pos":{"len":53,"line_nr":365,"pos":10777,"col":0,"last_line":367},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 TODO - test","is_multi":false,"pos":{"len":13,"line_nr":369,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 Sets a cookie with a `expire_date`","is_multi":false,"pos":{"len":36,"line_nr":370,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) set_cookie_with_expire_date(key string, val string, expire_date time.Time)","name":"set_cookie_with_expire_date","parent_name":"Context","return_type":"void","pos":{"len":99,"line_nr":371,"pos":10913,"col":0,"last_line":378},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 Gets a cookie by a key","is_multi":false,"pos":{"len":24,"line_nr":380,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (ctx &Context) get_cookie(key string) !string","name":"get_cookie","parent_name":"Context","return_type":"!string","pos":{"len":52,"line_nr":381,"pos":11143,"col":0,"last_line":387},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 TODO - test","is_multi":false,"pos":{"len":13,"line_nr":389,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 Sets the response status","is_multi":false,"pos":{"len":26,"line_nr":390,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) set_status(code int, desc string)","name":"set_status","parent_name":"Context","return_type":"void","pos":{"len":58,"line_nr":391,"pos":11387,"col":0,"last_line":397},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 TODO - test","is_multi":false,"pos":{"len":13,"line_nr":399,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 Adds an header to the response with key and val","is_multi":false,"pos":{"len":49,"line_nr":400,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) add_header(key string, val string)","name":"add_header","parent_name":"Context","return_type":"void","pos":{"len":59,"line_nr":401,"pos":11637,"col":0,"last_line":403},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 TODO - test","is_multi":false,"pos":{"len":13,"line_nr":405,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 Returns the header data from the key","is_multi":false,"pos":{"len":38,"line_nr":406,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (ctx &Context) get_header(key string) string","name":"get_header","parent_name":"Context","return_type":"string","pos":{"len":51,"line_nr":407,"pos":11796,"col":0,"last_line":409},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 set_value sets a value on the context","is_multi":false,"pos":{"len":39,"line_nr":411,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) set_value(key context.Key, value context.Any)","name":"set_value","parent_name":"Context","return_type":"void","pos":{"len":70,"line_nr":412,"pos":11943,"col":0,"last_line":414},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 get_value gets a value from the context","is_multi":false,"pos":{"len":41,"line_nr":416,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (ctx &Context) get_value[T](key context.Key) ?T","name":"get_value","parent_name":"Context","return_type":"?T","pos":{"len":54,"line_nr":417,"pos":12113,"col":0,"last_line":433},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 handle_static is used to mark a folder (relative to the current working folder)","is_multi":false,"pos":{"len":81,"line_nr":1010,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 as one that contains only static resources (css files, images etc).","is_multi":false,"pos":{"len":69,"line_nr":1011,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 If `root` is set the mount path for the dir will be in '/'","is_multi":false,"pos":{"len":60,"line_nr":1012,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 Usage:","is_multi":false,"pos":{"len":8,"line_nr":1013,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 ```v","is_multi":false,"pos":{"len":6,"line_nr":1014,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 os.chdir( os.executable() )?","is_multi":false,"pos":{"len":30,"line_nr":1015,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 app.handle_static('assets', true)","is_multi":false,"pos":{"len":35,"line_nr":1016,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 ```","is_multi":false,"pos":{"len":5,"line_nr":1017,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) handle_static(directory_path string, root bool) bool","name":"handle_static","parent_name":"Context","return_type":"bool","pos":{"len":77,"line_nr":1018,"pos":29820,"col":0,"last_line":1020},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 host_handle_static is used to mark a folder (relative to the current working folder)","is_multi":false,"pos":{"len":86,"line_nr":1022,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 as one that contains only static resources (css files, images etc).","is_multi":false,"pos":{"len":69,"line_nr":1023,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 If `root` is set the mount path for the dir will be in '/'","is_multi":false,"pos":{"len":60,"line_nr":1024,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 Usage:","is_multi":false,"pos":{"len":8,"line_nr":1025,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 ```v","is_multi":false,"pos":{"len":6,"line_nr":1026,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 os.chdir( os.executable() )?","is_multi":false,"pos":{"len":30,"line_nr":1027,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 app.host_handle_static('localhost', 'assets', true)","is_multi":false,"pos":{"len":53,"line_nr":1028,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 ```","is_multi":false,"pos":{"len":5,"line_nr":1029,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) host_handle_static(host string, directory_path string, root bool) bool","name":"host_handle_static","parent_name":"Context","return_type":"bool","pos":{"len":95,"line_nr":1030,"pos":30293,"col":0,"last_line":1042},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 TODO - test","is_multi":false,"pos":{"len":13,"line_nr":1044,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 mount_static_folder_at - makes all static files in `directory_path` and inside it, available at http://server/mount_path","is_multi":false,"pos":{"len":122,"line_nr":1045,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 For example: suppose you have called .mount_static_folder_at('/var/share/myassets', '/assets'),","is_multi":false,"pos":{"len":97,"line_nr":1046,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 and you have a file /var/share/myassets/main.css .","is_multi":false,"pos":{"len":52,"line_nr":1047,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 => That file will be available at URL: http://server/assets/main.css .","is_multi":false,"pos":{"len":72,"line_nr":1048,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) mount_static_folder_at(directory_path string, mount_path string) bool","name":"mount_static_folder_at","parent_name":"Context","return_type":"bool","pos":{"len":94,"line_nr":1049,"pos":31133,"col":0,"last_line":1051},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 TODO - test","is_multi":false,"pos":{"len":13,"line_nr":1053,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 host_mount_static_folder_at - makes all static files in `directory_path` and inside it, available at http://host/mount_path","is_multi":false,"pos":{"len":125,"line_nr":1054,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 For example: suppose you have called .host_mount_static_folder_at('localhost', '/var/share/myassets', '/assets'),","is_multi":false,"pos":{"len":115,"line_nr":1055,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 and you have a file /var/share/myassets/main.css .","is_multi":false,"pos":{"len":52,"line_nr":1056,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 => That file will be available at URL: http://localhost/assets/main.css .","is_multi":false,"pos":{"len":75,"line_nr":1057,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) host_mount_static_folder_at(host string, directory_path string, mount_path string) bool","name":"host_mount_static_folder_at","parent_name":"Context","return_type":"bool","pos":{"len":112,"line_nr":1058,"pos":31695,"col":0,"last_line":1067},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 TODO - test","is_multi":false,"pos":{"len":13,"line_nr":1069,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 Serves a file static","is_multi":false,"pos":{"len":22,"line_nr":1070,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 `url` is the access path on the site, `file_path` is the real path to the file, `mime_type` is the file type","is_multi":false,"pos":{"len":110,"line_nr":1071,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) serve_static(url string, file_path string)","name":"serve_static","parent_name":"Context","return_type":"void","pos":{"len":67,"line_nr":1072,"pos":32259,"col":0,"last_line":1074},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 TODO - test","is_multi":false,"pos":{"len":13,"line_nr":1076,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 Serves a file static","is_multi":false,"pos":{"len":22,"line_nr":1077,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 `url` is the access path on the site, `file_path` is the real path to the file","is_multi":false,"pos":{"len":80,"line_nr":1078,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 `mime_type` is the file type, `host` is the host to serve the file from","is_multi":false,"pos":{"len":73,"line_nr":1079,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) host_serve_static(host string, url string, file_path string)","name":"host_serve_static","parent_name":"Context","return_type":"void","pos":{"len":85,"line_nr":1080,"pos":32571,"col":0,"last_line":1086},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 user_agent returns the user-agent header for the current client","is_multi":false,"pos":{"len":65,"line_nr":1088,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (ctx &Context) user_agent() string","name":"user_agent","parent_name":"Context","return_type":"string","pos":{"len":41,"line_nr":1089,"pos":32919,"col":0,"last_line":1091},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 Returns the ip address from the current user","is_multi":false,"pos":{"len":46,"line_nr":1093,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (ctx &Context) ip() string","name":"ip","parent_name":"Context","return_type":"string","pos":{"len":33,"line_nr":1094,"pos":33064,"col":0,"last_line":1107},"platform":"cross","kind":"method","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 Set s to the form error","is_multi":false,"pos":{"len":25,"line_nr":1109,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn (mut ctx Context) error(s string)","name":"error","parent_name":"Context","return_type":"void","pos":{"len":40,"line_nr":1110,"pos":33380,"col":0,"last_line":1113},"platform":"cross","kind":"method","public":true,"from_scope":false}],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"struct Context {\nmut:\n\tcontent_type string = 'text/plain'\n\tstatus       string = '200 OK'\n\tctx          context.Context = context.EmptyContext{}\npub:\n\t// HTTP Request\n\treq http.Request\n\t// TODO Response\npub mut:\n\tdone bool\n\t// time.ticks() from start of vweb connection handle.\n\t// You can use it to determine how much time is spent on your request.\n\tpage_gen_start i64\n\t// TCP connection to client.\n\t// But beware, do not store it for further use, after request processing vweb will close connection.\n\tconn              &net.TcpConn = unsafe { nil }\n\tstatic_files      map[string]string\n\tstatic_mime_types map[string]string\n\tstatic_hosts      map[string]string\n\t// Map containing query params for the route.\n\t// http://localhost:3000/index?q=vpm&order_by=desc => { 'q': 'vpm', 'order_by': 'desc' }\n\tquery map[string]string\n\t// Multipart-form fields.\n\tform map[string]string\n\t// Files from multipart-form.\n\tfiles map[string][]http.FileData\n\n\theader http.Header // response headers\n\t// ? It doesn't seem to be used anywhere\n\tform_error                  string\n\tlivereload_poll_interval_ms int = 250\n}","name":"Context","parent_name":"","return_type":"","pos":{"len":18,"line_nr":150,"pos":4469,"col":0,"last_line":182},"platform":"cross","kind":"struct_","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"struct RedirectParams {\n\tstatus_code int = 302\n}","name":"RedirectParams","parent_name":"","return_type":"","pos":{"len":25,"line_nr":322,"pos":9708,"col":0,"last_line":324},"platform":"cross","kind":"struct_","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"type DatabasePool[T] = fn (tid int) T","name":"DatabasePool","parent_name":"","return_type":"","pos":{"len":21,"line_nr":435,"pos":12686,"col":0,"last_line":435},"platform":"cross","kind":"typedef","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"type Middleware = fn (mut Context) bool","name":"Middleware","parent_name":"","return_type":"","pos":{"len":19,"line_nr":448,"pos":12840,"col":0,"last_line":448},"platform":"cross","kind":"typedef","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"struct ControllerPath {\npub:\n\tpath    string\n\thandler ControllerHandler = unsafe { nil }\npub mut:\n\thost string\n}","name":"ControllerPath","parent_name":"","return_type":"","pos":{"len":25,"line_nr":476,"pos":13573,"col":0,"last_line":482},"platform":"cross","kind":"struct_","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"struct Controller {\npub mut:\n\tcontrollers []&ControllerPath\n}","name":"Controller","parent_name":"","return_type":"","pos":{"len":21,"line_nr":488,"pos":13757,"col":0,"last_line":491},"platform":"cross","kind":"struct_","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 controller generates a new Controller for the main app","is_multi":false,"pos":{"len":56,"line_nr":493,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn controller[T](path string, global_app &T) &ControllerPath","name":"controller","parent_name":"","return_type":"ControllerPath","pos":{"len":64,"line_nr":494,"pos":13882,"col":0,"last_line":509},"platform":"cross","kind":"function","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 controller_host generates a controller which only handles incoming requests from the `host` domain","is_multi":false,"pos":{"len":100,"line_nr":511,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn controller_host[T](host string, path string, global_app &T) &ControllerPath","name":"controller_host","parent_name":"","return_type":"ControllerPath","pos":{"len":82,"line_nr":512,"pos":14673,"col":0,"last_line":516},"platform":"cross","kind":"function","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 run - start a new VWeb server, listening to all available addresses, at the specified `port`","is_multi":false,"pos":{"len":94,"line_nr":518,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn run[T](global_app &T, port int)","name":"run","parent_name":"","return_type":"void","pos":{"len":38,"line_nr":519,"pos":14930,"col":0,"last_line":521},"platform":"cross","kind":"function","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"struct RunParams {\n\tfamily               net.AddrFamily = .ip6 // use `family: .ip, host: 'localhost'` when you want it to bind only to 127.0.0.1\n\thost                 string\n\tport                 int  = 8080\n\tnr_workers           int  = runtime.nr_jobs()\n\tpool_channel_slots   int  = 1000\n\tshow_startup_message bool = true\n\tstartup_message      string\n}","name":"RunParams","parent_name":"","return_type":"","pos":{"len":20,"line_nr":524,"pos":15067,"col":0,"last_line":532},"platform":"cross","kind":"struct_","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 run_at - start a new VWeb server, listening only on a specific address `host`, at the specified `port`","is_multi":false,"pos":{"len":104,"line_nr":534,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 Example: vweb.run_at(new_app(), vweb.RunParams{ host: 'localhost' port: 8099 family: .ip }) or { panic(err) }","is_multi":false,"pos":{"len":111,"line_nr":535,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn run_at[T](global_app &T, params RunParams) !","name":"run_at","parent_name":"","return_type":"!","pos":{"len":51,"line_nr":537,"pos":15660,"col":0,"last_line":598},"platform":"cross","kind":"function","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 Returns an empty result","is_multi":false,"pos":{"len":25,"line_nr":1115,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn not_found() Result","name":"not_found","parent_name":"","return_type":"Result","pos":{"len":25,"line_nr":1116,"pos":33513,"col":0,"last_line":1118},"platform":"cross","kind":"function","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"struct PoolParams[T] {\n\thandler    fn () T = unsafe { nil } @[required]\n\tnr_workers int = runtime.nr_jobs()\n}","name":"PoolParams","parent_name":"","return_type":"","pos":{"len":21,"line_nr":1215,"pos":35993,"col":0,"last_line":1218},"platform":"cross","kind":"struct_","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 database_pool creates a pool of database connections","is_multi":false,"pos":{"len":54,"line_nr":1220,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\vweb\\vweb.v","content":"fn database_pool[T](params PoolParams[T]) DatabasePool[T]","name":"database_pool","parent_name":"","return_type":"DatabasePool[T]","pos":{"len":61,"line_nr":1221,"pos":36164,"col":0,"last_line":1234},"platform":"cross","kind":"function","public":true,"from_scope":false}],"generator":"vdoc","time_generated":"2024-02-05 19:45:43"}