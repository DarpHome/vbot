{"module_name":"v.live","description":"","contents":[{"attributes":{},"comments":[],"children":[{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\v\\live\\common.c.v","content":"const is_used = 1","name":"","parent_name":"","return_type":"","pos":{"len":9,"line_nr":2,"pos":13,"col":0,"last_line":2},"platform":"cross","kind":"const_group","public":true,"from_scope":false}],"tags":[],"file_path":"","content":"","name":"Constants","parent_name":"","return_type":"","pos":{"len":0,"line_nr":0,"pos":0,"col":0,"last_line":0},"platform":"auto","kind":"const_group","public":false,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\v\\live\\common.c.v","content":"type FNLinkLiveSymbols = fn (linkcb voidptr)","name":"FNLinkLiveSymbols","parent_name":"","return_type":"","pos":{"len":26,"line_nr":4,"pos":36,"col":0,"last_line":4},"platform":"cross","kind":"typedef","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\v\\live\\common.c.v","content":"type FNLiveReloadCB = fn (info &LiveReloadInfo)","name":"FNLiveReloadCB","parent_name":"","return_type":"","pos":{"len":23,"line_nr":6,"pos":86,"col":0,"last_line":6},"platform":"cross","kind":"typedef","public":true,"from_scope":false},{"attributes":{},"comments":[],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\v\\live\\common.c.v","content":"struct LiveReloadInfo {\npub:\n\tvexe             string  // full path to the v compiler\n\tvopts            string  // v compiler options for a live shared library\n\toriginal         string  // full path to the original source file, compiled with -live\n\tlive_fn_mutex    voidptr // the address of the C mutex, that locks the [live] fns during reloads.\n\tlive_linkfn      FNLinkLiveSymbols = unsafe { nil } // generated C callback; receives a dlopen handle\n\tso_extension     string            // .so or .dll\n\tso_name_template string // a template for the shared libraries location\npub mut:\n\tmonitored_files   []string       // an array, containing all paths that should be monitored for changes\n\tlive_lib          voidptr        // the result of dl.open\n\treloads           int            // how many times a reloading was tried\n\treloads_ok        int            // how many times the reloads succeeded\n\treload_time_ms    int            // how much time the last reload took (compilation + loading)\n\tlast_mod_ts       i64            // a timestamp for when the original was last changed\n\trecheck_period_ms int = 100 // how often do you want to check for changes\n\tcb_recheck        FNLiveReloadCB = unsafe { nil } // executed periodically\n\tcb_compile_failed FNLiveReloadCB = unsafe { nil } // executed when a reload compilation failed\n\tcb_before         FNLiveReloadCB = unsafe { nil } // executed before a reload try happens\n\tcb_after          FNLiveReloadCB = unsafe { nil } // executed after a reload try happened, even if failed\n\tcb_locked_before  FNLiveReloadCB = unsafe { nil } // executed before lib reload, in the mutex section\n\tcb_locked_after   FNLiveReloadCB = unsafe { nil } // executed after lib reload, in the mutex section\n\tuser_ptr          voidptr        = unsafe { nil } // you can set it to anything, then retrieve it in the cb_ fns\n}","name":"LiveReloadInfo","parent_name":"","return_type":"","pos":{"len":25,"line_nr":8,"pos":139,"col":0,"last_line":32},"platform":"cross","kind":"struct_","public":true,"from_scope":false},{"attributes":{},"comments":[{"text":"\u0001 LiveReloadInfo.live_linkfn should be called by the reloader","is_multi":false,"pos":{"len":61,"line_nr":34,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 to dlsym all live functions. TODO: research a way to implement","is_multi":false,"pos":{"len":64,"line_nr":35,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 live_linkfn in pure V, without complicating live code generation","is_multi":false,"pos":{"len":66,"line_nr":36,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 too much.","is_multi":false,"pos":{"len":11,"line_nr":37,"pos":0,"col":0,"last_line":0}},{"text":"\u0001","is_multi":false,"pos":{"len":1,"line_nr":38,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 The callbacks: cb_compile_fail, cb_before, cb_after will be","is_multi":false,"pos":{"len":61,"line_nr":39,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 executed outside the mutex protected section, so be careful,","is_multi":false,"pos":{"len":62,"line_nr":40,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 if you modify your data inside them. They can race with your","is_multi":false,"pos":{"len":62,"line_nr":41,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 [live] functions.","is_multi":false,"pos":{"len":19,"line_nr":42,"pos":0,"col":0,"last_line":0}},{"text":"\u0001","is_multi":false,"pos":{"len":1,"line_nr":43,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 cb_locked_before and cb_locked_after will be executed *inside*","is_multi":false,"pos":{"len":64,"line_nr":44,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 the mutex protected section. They can NOT race with your [live]","is_multi":false,"pos":{"len":65,"line_nr":45,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 functions. They should be very quick in what they do though,","is_multi":false,"pos":{"len":62,"line_nr":46,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 otherwise your live functions can be delayed.","is_multi":false,"pos":{"len":47,"line_nr":47,"pos":0,"col":0,"last_line":0}},{"text":"\u0001","is_multi":false,"pos":{"len":1,"line_nr":48,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 live.info - give user access to program's LiveReloadInfo struct,","is_multi":false,"pos":{"len":66,"line_nr":49,"pos":0,"col":0,"last_line":0}},{"text":"\u0001 so that the user can set callbacks, read meta information, etc.","is_multi":false,"pos":{"len":65,"line_nr":50,"pos":0,"col":0,"last_line":0}}],"children":[],"tags":[],"file_path":"D:\\Games\\Proekti\\V\\v\\vlib\\v\\live\\common.c.v","content":"fn info() &LiveReloadInfo","name":"info","parent_name":"","return_type":"LiveReloadInfo","pos":{"len":29,"line_nr":51,"pos":2801,"col":0,"last_line":67},"platform":"cross","kind":"function","public":true,"from_scope":false}],"generator":"vdoc","time_generated":"2024-01-13 21:06:42"}